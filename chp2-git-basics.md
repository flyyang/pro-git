# Git 起步

如果你想通过阅读一章就去使用 Git ，本章就是。本章涵盖了每一个你在日常工作中大量
使用的基础命令。到本章末尾，你将能够：配置并初始化一个仓库，添加、删除追踪文
件，以及 stage 和 commmit 变化。同时本章也会介绍如何取忽略文件以及按模式忽略文
件，如和简单快速地修复错误，如何查看项目的历史，以及如何查看不同 commit 之间的
变化，以及如何从远端仓库 pull 和 push 代码。

## 获取一个仓库

获取一个 Git 项目主要有两种方法。 一是将已有的项目或者目录导入到 Git 。二是从其
他服务器上 clone 一个 现存的 Git 仓库。

### 在目录中初始化一个仓库

如果你想将一个现存的项目交由 Git 管理，你需要跳转到项目的目录下，输入：

```
$ git init

```

该命令创建一个名为 .git 的子文件夹。 此文件夹包含一个 Git 骨架，所有仓库相关信
息都会存储在这里。到目前为止，项目中的所有文件都还没被追踪起来。（参见11章详细
介绍你刚刚创建的 .git 文件夹到底都办好了什么文件）。

如果你想将现有的文件版本控制起来（空文件夹除外）， 你需要将文件都追踪起来，然后
做一个初始化的提交。你可以用 `git add` 命令指定你需要追踪的文件， 然后通过
`git commit` 去提交。

```
$ git add *.c
$ git add LICENSE
$ git commit -m 'initial project version'
```

我们几分钟后再来详细说明这些命令的含义。到目前为止，你已经有了一个 Git 仓库，追
踪了一些文件，做了一个初始化的提交。

### clone 一个现存的仓库

如果你想获取一个现存的 Git 仓库 —— 举例来说，一个你想贡献的项目 —— 你需要的命令
是 `git clone` 。如果你熟悉其他 VCS 系统，如 Subversion, 你会注意到命令是
`clone` 而不是 `checkout` 。这是一个重要的不同之处 —— 不仅仅是只复制工作相关的
内容， Git 基本上是对服务器的全量拷贝。项目的每一个版本，每一个文件的历史信息
默认都会被 `git clone` 命令拷贝回来。事实上，如果你的服务器磁盘损坏了，你可以使
用任何一个客户端的任何一个拷贝来服务器到 clone 时的状态（你可能会丢失一些服务端
的钩子等，但是所有版本控制的代码都会保存下来 —— 第四章有更多细节描述）。

clone 一个项目用 `git clone [url]` 。举例来说，如果你想 clone 一个 可通过链接访
问的 Git 仓库 libgit2, 你可以按如下操作：

```
$ git clone https://gihub.com/libgit2/libgit2
```

此步骤创建了一个 libgit2 的文件夹，并初始化了一个 .git 子文件夹，同时拉下了仓库
的所有数据， 并 check out 了一个最近版本的工作拷贝（working copy）。如果你查看
新创建的 libgit2 文件夹，你会发现有所的项目文件都在哪里，等待这你的使用或编辑。
如果不想用 libgit2这个名字，可以通过制定另外一个命令行选项：

```
git clone https://github.com/libgit2/libgit2 mylibgit
```

上面的命令和前一个命令行为一致，除了目标路径名叫做 mylibgit 。

Git 有多种不同的传输协议。前面的例子是 https 协议， 但是你也会看到 `git://` 或
者 `user@server:path/to/repo.git`, 它们使用的 SSH 传输协议。第4章会介绍服务器配
置 Git 访问的所有的可项，同时会介绍他们的优点和缺点。

### 在仓库中记录变化

你已经获取了一个真实的 Git 仓库，并且 check out 了一个工作项目拷贝。当项目到达
某个阶段的时候, 你需要做一些修改，并将修改按快照提交到仓库里。

牢记，你的工作目录的文件只有两种状态：追踪(checked)或未追踪(untracked）。追踪
的文件是最近的一次快照。他们可以被修改，取消修改或者stage起来。未追踪的文件是
处此之外的所有文件--工作路径下任何不在最近一次快照,或暂存区的所有文件。当你新
clone 一个项目下来，所有的文件处于追踪未修改状态，因为你仅仅签出了工作目录，但
还未做任何修改。

一旦你修改一些文件，Git 会认为它们是被修改的状态，因为相对于上一次提交，文件已
发生了变化。你暂存修改，然后提交这些暂存的文件，依此循环。


图片2-1： 文件的生命周期

### 查看文件的状态

查看什么文件在什么状体最好的工具是 `git status` 命令。如果你在 clone 后马上运行
这个命令，你可能会看到如下的提示：

```
$ git status
On branch master
noting to commit, working directory clean
```

这意味着你拥有一个干净的工作目录——换句话说，没有追踪、修改的文件。Git 同时也没
有未追踪的文件，否则会显示在提示里。最后， 该命令提示你在哪个 branch 上，并且提
示你本地与服务器段并没有分离。目前所有的分支都是默认的 master, 不必担心更多细
节。分支和引用（references）在第三章会详细讨论。

我们假设你要添加一个新的文件到项目，比如一个简单的 README 文件。 如果文件此文件
之前不存在，运行 git status ，你会看到未追踪的文件显示如下：

```
$ echo 'My Project' > README
$ git status
On branch master
Untracked files:
  (use "git add <file>..." to include in what will be committed)
    README

nothing added to commit but untracked files present (use "git add" to track)
```

你可以看到你新建的 README 文件处于未追踪状态，在 “Untracked files” 下可以看到
输出结果。未追踪通常意味着 Git 认为这个文件在上一个快照或 commit 中不存在；Git
不会主动包含文件到快照内，这需要你显示的添加进来。这样做的目的是避免不小心将非
必要的文件添加进来，如生成的二进制文件等。如果你想将 README 添加进来，让我们开始
追踪此文件。

### 追踪（tracking）新的文件

